We have developed a smart library, which helps application developers with CouchDB and Ledger interactions.
To use this library, just include the following code inside any javascript file in your NodeJS server.
```
const infrastructure = require('../fabcar/api/api.js');
```

## Get All Entities [/]
### getAllEntities [GET /-> JSON getAllEntities(user_id, entity_name)]
Method will return on success list of entities belonging to a given class.
+ Parameters
    + user_id: `user-474g7asg4d5h46473ghfd2` (string) - Search by User ID
    + entity_name: `course` (string) - Search by Entity name
+ Response with body (application/json)

    + Body

            {
                result: [
                    {
                        _id: 'course_1',
                        _rev: '1-445f08ff987e312a37104bcd9aac4536',
                        garant_id: 1,
                        name: 'Algoritmy a datove struktury',
                        acronym: 'ADS',
                        description: 'Algo a DS',
                        trimester: 4,
                        prerequisite_course_id: 0
                    },
                    {
                        _id: 'course_772e1a77acd625ee0794be9fc8001fea',
                        _rev: '1-a1bdb5099810eef8b46a3379c63bed49',
                        garant_id: 1,
                        name: 'Paralelne programovanie',
                        acronym: 'PPDS',
                        description: 'Paralelne programovanie a distribuovane systemy',
                        trimester: 4,
                        prerequisite_course_id: 1
                    }
                ]
            }

## Entity [/]
### getEntity [GET /-> getEntity(user_id, entity_id)]
Method will return on success json object of entity belonging to a given class.
+ Parameters
    + user_id: `user-474g7asg4d5h46473ghfd2` (string) - Search by User ID
    + entity_name: `course-772e1a77acd625ee0794be9fc8001fea` (string) - Search by Entity ID
+ Response 200 (application/json)

    + Body

            {
                _id: 'course_772e1a77acd625ee0794be9fc8001fea',
                _rev: '1-a1bdb5099810eef8b46a3379c63bed49',
                garant_id: 1,
                name: 'Paralelne programovanie',
                acronym: 'PPDS',
                description: 'Paralelne programovanie a distribuovane systemy',
                trimester: 4,
                prerequisite_course_id: 1
            }

+ Response 404 (application/json)

    + Headers

            X-Request-ID: f72fc914
            X-Response-Time: 4ms

    + Body

            {
                "error": "Entity not found"
            }

### updateEntity [PUT /-> updateEntity(user_id, entity)]
Method will update existing entity. Param `entity` is updated JSON object of entity. Method will find by a given object's ID and if exist, entity in persistance will be updated. Otherwise error will be given.
+ Parameters
    + user_id: `user-474g7asg4d5h46473ghfd2` (string) - Write by User ID
    + entity: `object` (JSON) - Update Entity by Entity object
+ Response 201 (application/json)

    + Headers

            {
                'cache-control': 'must-revalidate',
                connection: 'close',
                'content-length': '102',
                'content-type': 'application/json',
                date: 'Mon, 02 May 2022 07:32:41 GMT',
                etag: '"2-850df386f2c7b1d2d80c2d04eb3b5014"',
                location: 'http://127.0.0.1:5984/main_db/course_772e1a77acd625ee0794be9fc8001fea',
                server: 'CouchDB/3.1.1 (Erlang OTP/20)',
                'x-couch-request-id': '1aa180968a',
                'x-couchdb-body-time': '0'
            }

    + Body

            {
                ok: true,
                id: 'course_772e1a77acd625ee0794be9fc8001fea',
                rev: '2-850df386f2c7b1d2d80c2d04eb3b5014'
            }

+ Response 404 (application/json)

    + Headers

            X-Request-ID: f72fc914
            X-Response-Time: 4ms

    + Body

            {
                "error": "Entity not found"
            }

### putEntity [POST /-> putEntity(user_id, entity)]
Method will put a new entity into the persistance. Param `entity` is JSON object of entity. Entity ID is generated by this function. Please make sure `entity` contains the `entity_name` attribute (e.g. `entity.entity_name = 'course'`).
+ Parameters
    + user_id: `user-474g7asg4d5h46473ghfd2` (string) - Write by User ID
    + entity: `object` (JSON) - Create new Entity by Entity object
+ Response 201 (application/json)

    + Headers

            {
                'cache-control': 'must-revalidate',
                connection: 'close',
                'content-length': '102',
                'content-type': 'application/json',
                date: 'Mon, 02 May 2022 07:10:00 GMT',
                location: 'http://127.0.0.1:5984/main_db/course_772e1a77acd625ee0794be9fc8001fea',
                server: 'CouchDB/3.1.1 (Erlang OTP/20)',
                'x-couch-request-id': 'df5bac0548',
                'x-couchdb-body-time': '0'
            }

    + Body

            {
                ok: true,
                id: 'course_772e1a77acd625ee0794be9fc8001fea',
                rev: '1-a1bdb5099810eef8b46a3379c63bed49'
            }

+ Response 404 (application/json)

    + Headers

            X-Request-ID: f72fc914
            X-Response-Time: 4ms

    + Body

            {
                "error": "Entity not found"
            }

### deleteEntity [DELETE /-> deleteEntity(user_id, entity_id)]
Method will delete existing entity from the persistance. Method will find by a given object's ID and if exist, entity in persistance will be deleted. Otherwise error will be given.
+ Parameters
    + user_id: `user-474g7asg4d5h46473ghfd2` (string) - Write by User ID
    + entity_id: `course-772e1a77acd625ee0794be9fc8001fea` (string) - Delete Entity by Entity ID
+ Response 200 (application/json)

    + Headers

            {
                'cache-control': 'must-revalidate',
                connection: 'close',
                'content-length': '71',
                'content-type': 'application/json',
                date: 'Mon, 02 May 2022 07:20:49 GMT',
                etag: '"2-3befbead3de51462f58ed2fa04135599"',
                server: 'CouchDB/3.1.1 (Erlang OTP/20)',
                'x-couch-request-id': '5a7609188b',
                'x-couchdb-body-time': '0'
            }

    + Body

            {
                ok: true,
                id: 'course_1',
                rev: '2-3befbead3de51462f58ed2fa04135599'
            }

+ Response 404 (application/json)

    + Headers

            X-Request-ID: f72fc914
            X-Response-Time: 4ms

    + Body

            {
                "error": "Entity not found"
            }

## Users [/]
### createUser [POST /-> createUser(user)]
Method will create user entity into the persistance. Param `user` is JSON object of entity. Entity ID is generated by this function.
::: note
Please make sure, to send user object with property `user_type`. Possible values for this property are:
+ faculty_member
+ student
:::
+ Parameters
    + user: `object` (JSON) - Create new User by Entity object
+ Response 200 (application/json)

    + Headers

            X-Request-ID: f72fc914
            X-Response-Time: 4ms

    + Body

            { 
                successful: true, 
                user_id: 'user_63c307e5713ca1b2e05c79ea40004806' 
            }

### updateUser [PUT /-> udpateUser(user)]
Method will update existing entity. Param `user` is updated JSON object of entity. Method will find by a given object's ID and if exist, entity in persistance will be updated. Otherwise exception will be given.
+ Parameters
    + user: `object` (JSON) - Update Entity by Entity object
+ Response 200 (application/json)

    + Headers

            X-Request-ID: f72fc914
            X-Response-Time: 4ms

    + Body
    
            { 
                successful: true, 
                user_id: 'user_63c307e5713ca1b2e05c79ea40004806' 
            }

### deleteUser [DELETE /-> deleteUser(user_id)]
Method will delete existing user entity from the persistance. Method will find by a given ID and if exist, entity in persistance will be deleted. Otherwise exception will be given.
+ Parameters
    + user_id: `user-474g7asg4d5h46473ghfd2` (string) - Delete by User ID
+ Response 200 (application/json)

    + Headers

            X-Request-ID: f72fc914
            X-Response-Time: 4ms

    + Body
    
            { 
                successful: true, 
                user_id: 'user_63c307e5713ca1b2e05c79ea40004806' 
            }

### getUserSession [GET /-> getUserSession(email, password)]
This method should be used while users logging and will return JSON object of a user on success.
::: note
Please make sure, to send hashed password. This method will only check if the given data match the database.
:::
+ Parameters
    + email: `ferino@stuba.sk` (string) - User's email
    + password: `jnldsafsaf46sda8f46as8df468asf` (string) - User's hashed password
+ Response 200 (application/json)

    + Headers

            X-Request-ID: f72fc914
            X-Response-Time: 4ms

    + Body
    
            {
                _id: 'user_63c307e5713ca1b2e05c79ea4000a009',
                _rev: '1-93e028f1a56e4282ad59d14c4a394418',
                user_type: 'student',
                first_name: 'Juraj',
                last_name: 'Janosik',
                email: 'jurajjanosik@ais.sk',
                unique_id: 'uniqid',
                private_email: 'jurajjanosik@koliba.sk',
                address_id: 1
            }

